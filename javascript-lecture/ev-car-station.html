<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=96f5f09f793542ede892e15790deb32d&libraries=services"></script>
  </head>
  <body>
    <div class="map" style="width: 100%; height: 800px"></div>

    <script>
      const container = document.querySelector(".map"); //지도를 담을 영역의 DOM 레퍼런스
      const options = {
        //지도를 생성할 때 필요한 기본 옵션
        center: new kakao.maps.LatLng(33.650701, 126.570667), //지도의 중심좌표.
        level: 3, //지도의 레벨(확대, 축소 정도)
      };

      const map = new kakao.maps.Map(container, options); //

      fetch(
        "https://api.odcloud.kr/api/EvInfoServiceV2/v1/getEvSearchList?page=1&perPage=300&cond[addr::LIKE]=서울&returnType=JSON&serviceKey=Wnus4QpirWGI56CfvzMWDIDHMRL%2FmEF%2FqTl9gwVNbRggLYTGPFIdwBy0L51B%2B27d5QRbLanNmIAxPwNvl7dKPA%3D%3D"
      )
        .then(function (response) {
          return response.json();
        })
        .then(function (result) {
          console.log(result);
          const stationList = [...result.data];
          stationList.forEach(function (item) {
            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
              map: map, // 마커를 표시할 지도
              position: new kakao.maps.LatLng(item.lat, item.longi), // 마커를 표시할 위치
              title: item.csNm, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
            });
          });
        })
        .catch(function (error) {
          console.log(error);
        });
    </script>
  </body>
</html>
